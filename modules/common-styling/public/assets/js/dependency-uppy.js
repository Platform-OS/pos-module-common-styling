const{AbortController:t}=globalThis,{AbortSignal:e}=globalThis;Error;Error;Array.from;Symbol("__queue");function i(t,e,i){const n=[];return t.forEach(t=>"string"!=typeof t?n.push(t):e[Symbol.split](t).forEach((t,e,r)=>{""!==t&&n.push(t),e<r.length-1&&n.push(i)})),n}
/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function n(t,e){const n=/\$/g;let r=[t];if(null==e)return r;for(const t of Object.keys(e))if("_"!==t){let s=e[t];"string"==typeof s&&(s=n[Symbol.replace](s,"$$$$")),r=i(r,new RegExp(`%\\{${t}\\}`,"g"),s)}return r}const r=t=>{throw new Error(`missing string: ${t}`)};class s{locale;constructor(t,{onMissingKey:e=r}={}){this.locale={strings:{},pluralize:t=>1===t?0:1},Array.isArray(t)?t.forEach(this.#t,this):this.#t(t),this.#e=e}#e;#t(t){if(!t?.strings)return;const e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...t.strings},pluralize:t.pluralize||e.pluralize})}translate(t,e){return this.translateArray(t,e).join("")}translateArray(t,e){let i=this.locale.strings[t];null==i&&(this.#e(t),i=t);if("object"==typeof i){if(e&&void 0!==e.smart_count){return n(i[this.locale.pluralize(e.smart_count)],e)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof i)throw new Error("string was not a string");return n(i,e)}}Error;var a,o,h,l,c,u,f,p,d,g,m,v={},_=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,b=Array.isArray;function w(t,e){for(var i in e)t[i]=e[i];return t}function x(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function k(t,e,i){var n,r,s,o={};for(s in e)"key"==s?n=e[s]:"ref"==s?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?a.call(arguments,2):i),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===o[s]&&(o[s]=t.defaultProps[s]);return O(t,o,n,r,null)}function O(t,e,i,n,r){var s={type:t,props:e,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++h:r,__i:-1,__u:0};return null==r&&null!=o.vnode&&o.vnode(s),s}function T(t){return t.children}function S(t,e){this.props=t,this.context=e}function C(t,e){if(null==e)return t.__?C(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if(null!=(i=t.__k[e])&&null!=i.__e)return i.__e;return"function"==typeof t.type?C(t):null}function M(t){var e,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(i=t.__k[e])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return M(t)}}function E(t){(!t.__d&&(t.__d=!0)&&l.push(t)&&!A.__r++||c!=o.debounceRendering)&&((c=o.debounceRendering)||u)(A)}function A(){for(var t,e,i,n,r,s,a,h=1;l.length;)l.length>h&&l.sort(f),t=l.shift(),h=l.length,t.__d&&(i=void 0,n=void 0,r=(n=(e=t).__v).__e,s=[],a=[],e.__P&&((i=w({},n)).__v=n.__v+1,o.vnode&&o.vnode(i),z(e.__P,i,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,null==r?C(n):r,!!(32&n.__u),a),i.__v=n.__v,i.__.__k[i.__i]=i,W(s,i,a),n.__e=n.__=null,i.__e!=r&&M(i)));A.__r=0}function D(t,e,i,n,r,s,a,o,h,l,c){var u,f,p,d,g,m,y,w=n&&n.__k||_,x=e.length;for(h=function(t,e,i,n,r){var s,a,o,h,l,c=i.length,u=c,f=0;for(t.__k=new Array(r),s=0;s<r;s++)null!=(a=e[s])&&"boolean"!=typeof a&&"function"!=typeof a?("string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?a=t.__k[s]=O(null,a,null,null,null):b(a)?a=t.__k[s]=O(T,{children:a},null,null,null):null==a.constructor&&a.__b>0?a=t.__k[s]=O(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):t.__k[s]=a,h=s+f,a.__=t,a.__b=t.__b+1,-1!=(l=a.__i=P(a,i,h,u))&&(u--,(o=i[l])&&(o.__u|=2)),null==o||null==o.__v?(-1==l&&(r>c?f--:r<c&&f++),"function"!=typeof a.type&&(a.__u|=4)):l!=h&&(l==h-1?f--:l==h+1?f++:(l>h?f--:f++,a.__u|=4))):t.__k[s]=null;if(u)for(s=0;s<c;s++)null!=(o=i[s])&&!(2&o.__u)&&(o.__e==n&&(n=C(o)),V(o,o));return n}(i,e,w,h,x),u=0;u<x;u++)null!=(p=i.__k[u])&&(f=-1==p.__i?v:w[p.__i]||v,p.__i=u,m=z(t,p,f,r,s,a,o,h,l,c),d=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&H(f.ref,null,p),c.push(p.ref,p.__c||d,p)),null==g&&null!=d&&(g=d),(y=!!(4&p.__u))||f.__k===p.__k?h=B(p,h,t,y):"function"==typeof p.type&&void 0!==m?h=m:d&&(h=d.nextSibling),p.__u&=-7);return i.__e=g,h}function B(t,e,i,n){var r,s;if("function"==typeof t.type){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=B(r[s],e,i,n));return e}t.__e!=e&&(n&&(e&&t.type&&!e.parentNode&&(e=C(t)),i.insertBefore(t.__e,e||null)),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function L(t,e){return e=e||[],null==t||"boolean"==typeof t||(b(t)?t.some(function(t){L(t,e)}):e.push(t)),e}function P(t,e,i,n){var r,s,a,o=t.key,h=t.type,l=e[i],c=null!=l&&!(2&l.__u);if(null===l&&null==o||c&&o==l.key&&h==l.type)return i;if(n>(c?1:0))for(r=i-1,s=i+1;r>=0||s<e.length;)if(null!=(l=e[a=r>=0?r--:s++])&&!(2&l.__u)&&o==l.key&&h==l.type)return a;return-1}function N(t,e,i){"-"==e[0]?t.setProperty(e,null==i?"":i):t[e]=null==i?"":"number"!=typeof i||y.test(e)?i:i+"px"}function U(t,e,i,n,r){var s,a;t:if("style"==e)if("string"==typeof i)t.style.cssText=i;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)i&&e in i||N(t.style,e,"");if(i)for(e in i)n&&i[e]==n[e]||N(t.style,e,i[e])}else if("o"==e[0]&&"n"==e[1])s=e!=(e=e.replace(p,"$1")),a=e.toLowerCase(),e=a in t||"onFocusOut"==e||"onFocusIn"==e?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=i,i?n?i.u=n.u:(i.u=d,t.addEventListener(e,s?m:g,s)):t.removeEventListener(e,s?m:g,s);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==i?"":i;break t}catch(t){}"function"==typeof i||(null==i||!1===i&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==i?"":i))}}function j(t){return function(e){if(this.l){var i=this.l[e.type+t];if(null==e.t)e.t=d++;else if(e.t<i.u)return;return i(o.event?o.event(e):e)}}}function z(t,e,i,n,r,s,h,l,c,u){var f,p,d,g,m,_,y,k,O,M,E,A,B,L,P,N,j,z=e.type;if(null!=e.constructor)return null;128&i.__u&&(c=!!(32&i.__u),s=[l=e.__e=i.__e]),(f=o.__b)&&f(e);t:if("function"==typeof z)try{if(k=e.props,O="prototype"in z&&z.prototype.render,M=(f=z.contextType)&&n[f.__c],E=f?M?M.props.value:f.__:n,i.__c?y=(p=e.__c=i.__c).__=p.__E:(O?e.__c=p=new z(k,E):(e.__c=p=new S(k,E),p.constructor=z,p.render=F),M&&M.sub(p),p.state||(p.state={}),p.__n=n,d=p.__d=!0,p.__h=[],p._sb=[]),O&&null==p.__s&&(p.__s=p.state),O&&null!=z.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=w({},p.__s)),w(p.__s,z.getDerivedStateFromProps(k,p.__s))),g=p.props,m=p.state,p.__v=e,d)O&&null==z.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),O&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(O&&null==z.getDerivedStateFromProps&&k!==g&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(k,E),e.__v==i.__v||!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(k,p.__s,E)){for(e.__v!=i.__v&&(p.props=k,p.state=p.__s,p.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(t){t&&(t.__=e)}),A=0;A<p._sb.length;A++)p.__h.push(p._sb[A]);p._sb=[],p.__h.length&&h.push(p);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(k,p.__s,E),O&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(g,m,_)})}if(p.context=E,p.props=k,p.__P=t,p.__e=!1,B=o.__r,L=0,O){for(p.state=p.__s,p.__d=!1,B&&B(e),f=p.render(p.props,p.state,p.context),P=0;P<p._sb.length;P++)p.__h.push(p._sb[P]);p._sb=[]}else do{p.__d=!1,B&&B(e),f=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++L<25);p.state=p.__s,null!=p.getChildContext&&(n=w(w({},n),p.getChildContext())),O&&!d&&null!=p.getSnapshotBeforeUpdate&&(_=p.getSnapshotBeforeUpdate(g,m)),N=f,null!=f&&f.type===T&&null==f.key&&(N=R(f.props.children)),l=D(t,b(N)?N:[N],e,i,n,r,s,h,l,c,u),p.base=e.__e,e.__u&=-161,p.__h.length&&h.push(p),y&&(p.__E=p.__=null)}catch(t){if(e.__v=null,c||null!=s)if(t.then){for(e.__u|=c?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,e.__e=l}else{for(j=s.length;j--;)x(s[j]);I(e)}else e.__e=i.__e,e.__k=i.__k,t.then||I(e);o.__e(t,e,i)}else null==s&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):l=e.__e=function(t,e,i,n,r,s,h,l,c){var u,f,p,d,g,m,_,y=i.props||v,w=e.props,k=e.type;if("svg"==k?r="http://www.w3.org/2000/svg":"math"==k?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=s)for(u=0;u<s.length;u++)if((g=s[u])&&"setAttribute"in g==!!k&&(k?g.localName==k:3==g.nodeType)){t=g,s[u]=null;break}if(null==t){if(null==k)return document.createTextNode(w);t=document.createElementNS(r,k,w.is&&w),l&&(o.__m&&o.__m(e,s),l=!1),s=null}if(null==k)y===w||l&&t.data==w||(t.data=w);else{if(s=s&&a.call(t.childNodes),!l&&null!=s)for(y={},u=0;u<t.attributes.length;u++)y[(g=t.attributes[u]).name]=g.value;for(u in y)if(g=y[u],"children"==u);else if("dangerouslySetInnerHTML"==u)p=g;else if(!(u in w)){if("value"==u&&"defaultValue"in w||"checked"==u&&"defaultChecked"in w)continue;U(t,u,null,g,r)}for(u in w)g=w[u],"children"==u?d=g:"dangerouslySetInnerHTML"==u?f=g:"value"==u?m=g:"checked"==u?_=g:l&&"function"!=typeof g||y[u]===g||U(t,u,g,y[u],r);if(f)l||p&&(f.__html==p.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(p&&(t.innerHTML=""),D("template"==e.type?t.content:t,b(d)?d:[d],e,i,n,"foreignObject"==k?"http://www.w3.org/1999/xhtml":r,s,h,s?s[0]:i.__k&&C(i,0),l,c),null!=s)for(u=s.length;u--;)x(s[u]);l||(u="value","progress"==k&&null==m?t.removeAttribute("value"):null!=m&&(m!==t[u]||"progress"==k&&!m||"option"==k&&m!=y[u])&&U(t,u,m,y[u],r),u="checked",null!=_&&_!=t[u]&&U(t,u,_,y[u],r))}return t}(i.__e,e,i,n,r,s,h,c,u);return(f=o.diffed)&&f(e),128&e.__u?void 0:l}function I(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(I)}function W(t,e,i){for(var n=0;n<i.length;n++)H(i[n],i[++n],i[++n]);o.__c&&o.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(t){o.__e(t,e.__v)}})}function R(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:b(t)?t.map(R):w({},t)}function H(t,e,i){try{if("function"==typeof t){var n="function"==typeof t.__u;n&&t.__u(),n&&null==e||(t.__u=t(e))}else t.current=e}catch(t){o.__e(t,i)}}function V(t,e,i){var n,r;if(o.unmount&&o.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||H(n,null,e)),null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(t){o.__e(t,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&V(n[r],e,i||"function"!=typeof t.type);i||x(t.__e),t.__c=t.__=t.__e=void 0}function F(t,e,i){return this.constructor(t,i)}function X(t,e,i){var n,r,s,o,h=w({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)"key"==s?n=e[s]:"ref"==s?r=e[s]:h[s]=void 0===e[s]&&null!=o?o[s]:e[s];return arguments.length>2&&(h.children=arguments.length>3?a.call(arguments,2):i),O(t.type,h,n||t.key,r||t.ref,null)}a=_.slice,o={__e:function(t,e,i,n){for(var r,s,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&null!=s.getDerivedStateFromError&&(r.setState(s.getDerivedStateFromError(t)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,n||{}),a=r.__d),a)return r.__E=r}catch(e){t=e}throw t}},h=0,S.prototype.setState=function(t,e){var i;i=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=w({},this.state),"function"==typeof t&&(t=t(w({},i),this.props)),t&&w(i,t),null!=t&&this.__v&&(e&&this._sb.push(e),E(this))},S.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),E(this))},S.prototype.render=T,l=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(t,e){return t.__v.__b-e.__v.__b},A.__r=0,p=/(PointerCapture)$|Capture$/i,d=0,g=j(!1),m=j(!0);Array.isArray;var Y,$,K,q=[],G=o,J=G.__b,Q=G.__r,Z=G.diffed,tt=G.__c,et=G.unmount,it=G.__;function nt(){for(var t;t=q.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(at),t.__H.__h.forEach(ot),t.__H.__h=[]}catch(e){t.__H.__h=[],G.__e(e,t.__v)}}G.__b=function(t){Y=null,J&&J(t)},G.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),it&&it(t,e)},G.__r=function(t){Q&&Q(t);var e=(Y=t.__c).__H;e&&($===Y?(e.__h=[],Y.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(at),e.__h.forEach(ot),e.__h=[],0)),$=Y},G.diffed=function(t){Z&&Z(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==q.push(e)&&K===G.requestAnimationFrame||((K=G.requestAnimationFrame)||st)(nt)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),$=Y=null},G.__c=function(t,e){e.some(function(t){try{t.__h.forEach(at),t.__h=t.__h.filter(function(t){return!t.__||ot(t)})}catch(i){e.some(function(t){t.__h&&(t.__h=[])}),e=[],G.__e(i,t.__v)}}),tt&&tt(t,e)},G.unmount=function(t){et&&et(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(t){try{at(t)}catch(t){e=t}}),i.__H=void 0,e&&G.__e(e,i.__v))};var rt="function"==typeof requestAnimationFrame;function st(t){var e,i=function(){clearTimeout(n),rt&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(i,35);rt&&(e=requestAnimationFrame(i))}function at(t){var e=Y,i=t.__c;"function"==typeof i&&(t.__c=void 0,i()),Y=e}function ot(t){var e=Y;t.__c=t.__(),Y=e}class ht{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(t,e){this.uppy=t,this.opts=e??{}}getPluginState(){const{plugins:t}=this.uppy.getState();return t?.[this.id]||{}}setPluginState(t){const{plugins:e}=this.uppy.getState();this.uppy.setState({plugins:{...e,[this.id]:{...e[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const t=new s([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(t){}afterUpdate(){}}var lt,ct,ut="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pt,dt,gt,mt;ct||(ct=1,lt=function(t){if("number"!=typeof t||Number.isNaN(t))throw new TypeError("Expected a number, got "+typeof t);const e=t<0;let i=Math.abs(t);if(e&&(i=-i),0===i)return"0 B";const n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(i)/Math.log(1024)),n.length-1),s=Number(i/1024**r),a=n[r];return`${s>=10||s%1==0?Math.round(s):s.toFixed(1)} ${a}`});function vt(){if(dt)return pt;function t(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}return dt=1,t.prototype.match=function(t){var e,i,n=!0,r=this.parts,s=r.length;if("string"==typeof t||t instanceof String)if(this.hasWild||this.text==t){for(i=(t||"").split(this.separator),e=0;n&&e<s;e++)"*"!==r[e]&&(n=e<i.length&&r[e]===i[e]);n=n&&i}else n=!1;else if("function"==typeof t.splice)for(n=[],e=t.length;e--;)this.match(t[e])&&(n[n.length]=t[e]);else if("object"==typeof t)for(var a in n={},t)this.match(a)&&(n[a]=t[a]);return n},pt=function(e,i,n){var r=new t(e,n||/[\/\.]/);return void 0!==i?r.match(i):r},pt}!function(){if(mt)return gt;mt=1;var t=vt(),e=/[\/\+\.]/;gt=function(i,n){function r(n){var r=t(n,i,e);return r&&r.length>=2}return n?r(n.split(";")[0]):r}}();Error;var _t,yt,bt,wt,xt,kt,Ot,Tt,St,Ct,Mt,Et,At,Dt,Bt,Lt,Pt,Nt,Ut,jt,zt,It,Wt,Rt,Ht,Vt,Ft,Xt,Yt,$t;function Kt(){if(yt)return _t;return yt=1,_t=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},_t}function qt(){if(kt)return xt;kt=1;var t=function(){if(wt)return bt;wt=1;var t="object"==typeof ut&&ut&&ut.Object===Object&&ut;return bt=t}(),e="object"==typeof self&&self&&self.Object===Object&&self,i=t||e||Function("return this")();return xt=i}function Gt(){if(Et)return Mt;Et=1;var t=function(){if(Ct)return St;Ct=1;var t=/\s/;return St=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i},St}(),e=/^\s+/;return Mt=function(i){return i?i.slice(0,t(i)+1).replace(e,""):i}}function Jt(){if(Dt)return At;Dt=1;var t=qt().Symbol;return At=t}function Qt(){if(jt)return Ut;jt=1;var t=Jt(),e=function(){if(Lt)return Bt;Lt=1;var t=Jt(),e=Object.prototype,i=e.hasOwnProperty,n=e.toString,r=t?t.toStringTag:void 0;return Bt=function(t){var e=i.call(t,r),s=t[r];try{t[r]=void 0;var a=!0}catch(t){}var o=n.call(t);return a&&(e?t[r]=s:delete t[r]),o}}(),i=function(){if(Nt)return Pt;Nt=1;var t=Object.prototype.toString;return Pt=function(e){return t.call(e)}}(),n=t?t.toStringTag:void 0;return Ut=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":n&&n in Object(t)?e(t):i(t)}}function Zt(){if(Rt)return Wt;Rt=1;var t=Qt(),e=It?zt:(It=1,zt=function(t){return null!=t&&"object"==typeof t});return Wt=function(i){return"symbol"==typeof i||e(i)&&"[object Symbol]"==t(i)}}function te(){if(Xt)return Ft;Xt=1;var t=Kt(),e=function(){if(Tt)return Ot;Tt=1;var t=qt();return Ot=function(){return t.Date.now()}}(),i=function(){if(Vt)return Ht;Vt=1;var t=Gt(),e=Kt(),i=Zt(),n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;return Ht=function(o){if("number"==typeof o)return o;if(i(o))return NaN;if(e(o)){var h="function"==typeof o.valueOf?o.valueOf():o;o=e(h)?h+"":h}if("string"!=typeof o)return 0===o?o:+o;o=t(o);var l=r.test(o);return l||s.test(o)?a(o.slice(2),l?2:8):n.test(o)?NaN:+o}}(),n=Math.max,r=Math.min;return Ft=function(s,a,o){var h,l,c,u,f,p,d=0,g=!1,m=!1,v=!0;if("function"!=typeof s)throw new TypeError("Expected a function");function _(t){var e=h,i=l;return h=l=void 0,d=t,u=s.apply(i,e)}function y(t){var e=t-p;return void 0===p||e>=a||e<0||m&&t-d>=c}function b(){var t=e();if(y(t))return w(t);f=setTimeout(b,function(t){var e=a-(t-p);return m?r(e,c-(t-d)):e}(t))}function w(t){return f=void 0,v&&h?_(t):(h=l=void 0,u)}function x(){var t=e(),i=y(t);if(h=arguments,l=this,p=t,i){if(void 0===f)return function(t){return d=t,f=setTimeout(b,a),g?_(t):u}(p);if(m)return clearTimeout(f),f=setTimeout(b,a),_(p)}return void 0===f&&(f=setTimeout(b,a)),u}return a=i(a)||0,t(o)&&(g=!!o.leading,c=(m="maxWait"in o)?n(i(o.maxWait)||0,a):c,v="trailing"in o?!!o.trailing:v),x.cancel=function(){void 0!==f&&clearTimeout(f),d=0,h=p=l=f=void 0},x.flush=function(){return void 0===f?u:w(e())},x},Ft}var ee,ie;!function(){if($t)return Yt;$t=1;var t=te(),e=Kt();Yt=function(i,n,r){var s=!0,a=!0;if("function"!=typeof i)throw new TypeError("Expected a function");return e(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),t(i,n,{leading:s,maxWait:n,trailing:a})}}();ie||(ie=1,ee=function(){var t={},e=t._fns={};return t.emit=function(t,i,n,r,s,a,o){var h=function(t){for(var i=e[t]?e[t]:[],n=t.indexOf(":"),r=-1===n?[t]:[t.substring(0,n),t.substring(n+1)],s=Object.keys(e),a=0,o=s.length;a<o;a++){var h=s[a];if("*"===h&&(i=i.concat(e[h])),2===r.length&&r[0]===h){i=i.concat(e[h]);break}}return i}(t);h.length&&function(t,e,i){for(var n=0,r=e.length;n<r&&e[n];n++)e[n].event=t,e[n].apply(e[n],i)}(t,h,[i,n,r,s,a,o])},t.on=function(t,i){e[t]||(e[t]=[]),e[t].push(i)},t.once=function(e,i){this.on(e,function n(){i.apply(this,arguments),t.off(e,n)})},t.off=function(t,e){var i=[];if(t&&e)for(var n=this._fns[t],r=0,s=n?n.length:0;r<s;r++)n[r]!==e&&i.push(n[r]);i.length?this._fns[t]=i:delete this._fns[t]},t});var ne="5.2.0";Symbol.for("uppy test: updateTotalProgress"),Symbol.for("uppy test: getPlugins"),Symbol.for("uppy test: createUpload");new Set;Error;var re,se={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/re||(re=1,ae=se,function(){var t={}.hasOwnProperty;function e(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];r&&(t=n(t,i(r)))}return t}function i(i){if("string"==typeof i||"number"==typeof i)return i;if("object"!=typeof i)return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var r="";for(var s in i)t.call(i,s)&&i[s]&&(r=n(r,s));return r}function n(t,e){return e?t?t+" "+e:t+e:t}ae.exports?(e.default=e,ae.exports=e):window.classNames=e}()),te();var ae,oe="5.2.0";var he,le={exports:{}};he||(he=1,function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,s||t,a),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new n:delete t._events[e]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},o.prototype.emit=function(t,e,n,r,s,a){var o=i?i+t:t;if(!this._events[o])return!1;var h,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,s),!0;case 6:return c.fn.call(c.context,e,n,r,s,a),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!h)for(f=1,h=new Array(u-1);f<u;f++)h[f-1]=arguments[f];c[l].fn.apply(c[l].context,h)}}return!0},o.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||a(this,s);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==e||r&&!o[h].once||n&&o[h].context!==n)&&l.push(o[h]);l.length?this._events[s]=1===l.length?l[0]:l:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o}(le));Error;Error;Symbol.for("uppy test: searchDebounceMs");function ce(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ue="undefined"!=typeof self?self:global;const fe="undefined"!=typeof navigator,pe=fe&&"undefined"==typeof HTMLImageElement,de=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),ge=ue.Buffer,me=!!ge,ve=t=>void 0!==t;function _e(t){return void 0===t||(t instanceof Map?0===t.size:0===Object.values(t).filter(ve).length)}function ye(t){let e=new Error(t);throw delete e.stack,e}function be(t){let e=function(t){let e=0;return t.ifd0.enabled&&(e+=1024),t.exif.enabled&&(e+=2048),t.makerNote&&(e+=2048),t.userComment&&(e+=1024),t.gps.enabled&&(e+=512),t.interop.enabled&&(e+=100),t.ifd1.enabled&&(e+=1024),e+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const we=t=>String.fromCharCode.apply(null,t),xe="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;class ke{static from(t,e){return t instanceof this&&t.le===e?t:new ke(t,void 0,void 0,e)}constructor(t,e=0,i,n){if("boolean"==typeof n&&(this.le=n),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===i&&(i=t.byteLength-e);let n=new DataView(t,e,i);this._swapDataView(n)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof ke){void 0===i&&(i=t.byteLength-e),(e+=t.byteOffset)+i>t.byteOffset+t.byteLength&&ye("Creating view outside of available memory in ArrayBuffer");let n=new DataView(t.buffer,e,i);this._swapDataView(n)}else if("number"==typeof t){let e=new DataView(new ArrayBuffer(t));this._swapDataView(e)}else ye("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,e,i=ke){return t instanceof DataView||t instanceof ke?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||ye("BufferView.set(): Invalid data argument."),this.toUint8().set(t,e),new i(this,e,t.byteLength)}subarray(t,e){return e=e||this._lengthToEnd(t),new ke(this,t,e)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,e){return new Uint8Array(this.buffer,this.byteOffset+t,e)}getString(t=0,e=this.byteLength){return i=this.getUint8Array(t,e),xe?xe.decode(i):me?Buffer.from(i).toString("utf8"):decodeURIComponent(escape(we(i)));var i}getLatin1String(t=0,e=this.byteLength){let i=this.getUint8Array(t,e);return we(i)}getUnicodeString(t=0,e=this.byteLength){const i=[];for(let n=0;n<e&&t+n<this.byteLength;n+=2)i.push(this.getUint16(t+n));return we(i)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,e=this.le){return this.dataView.getInt16(t,e)}getInt32(t,e=this.le){return this.dataView.getInt32(t,e)}getUint16(t,e=this.le){return this.dataView.getUint16(t,e)}getUint32(t,e=this.le){return this.dataView.getUint32(t,e)}getFloat32(t,e=this.le){return this.dataView.getFloat32(t,e)}getFloat64(t,e=this.le){return this.dataView.getFloat64(t,e)}getFloat(t,e=this.le){return this.dataView.getFloat32(t,e)}getDouble(t,e=this.le){return this.dataView.getFloat64(t,e)}getUintBytes(t,e,i){switch(e){case 1:return this.getUint8(t,i);case 2:return this.getUint16(t,i);case 4:return this.getUint32(t,i);case 8:return this.getUint64&&this.getUint64(t,i)}}getUint(t,e,i){switch(e){case 8:return this.getUint8(t,i);case 16:return this.getUint16(t,i);case 32:return this.getUint32(t,i);case 64:return this.getUint64&&this.getUint64(t,i)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function Oe(t,e){ye(`${t} '${e}' was not loaded, try using full build of exifr.`)}class Te extends Map{constructor(t){super(),this.kind=t}get(t,e){return this.has(t)||Oe(this.kind,t),e&&(t in e||function(t,e){ye(`Unknown ${t} '${e}'.`)}(this.kind,t),e[t].enabled||Oe(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}}var Se=new Te("file parser"),Ce=new Te("segment parser"),Me=new Te("file reader");let Ee=ue.fetch;function Ae(t,e){return(i=t).startsWith("data:")||i.length>1e4?Be(t,e,"base64"):de&&t.includes("://")?De(t,e,"url",Le):de?Be(t,e,"fs"):fe?De(t,e,"url",Le):void ye("Invalid input argument");var i}async function De(t,e,i,n){return Me.has(i)?Be(t,e,i):n?async function(t,e){let i=await e(t);return new ke(i)}(t,n):void ye(`Parser ${i} is not loaded`)}async function Be(t,e,i){let n=new(Me.get(i))(t,e);return await n.read(),n}const Le=t=>Ee(t).then(t=>t.arrayBuffer()),Pe=t=>new Promise((e,i)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=i,n.readAsArrayBuffer(t)});class Ne extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Ue(t,e,i){let n=new Ne;for(let[t,e]of i)n.set(t,e);if(Array.isArray(e))for(let i of e)t.set(i,n);else t.set(e,n);return n}function je(t,e,i){let n,r=t.get(e);for(n of i)r.set(n[0],n[1])}const ze=new Map,Ie=new Map,We=new Map,Re=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],He=["jfif","xmp","icc","iptc","ihdr"],Ve=["tiff",...He],Fe=["ifd0","ifd1","exif","gps","interop"],Xe=[...Ve,...Fe],Ye=["makerNote","userComment"],$e=["translateKeys","translateValues","reviveValues","multiSegment"],Ke=[...$e,"sanitize","mergeOutput","silentErrors"];class qe{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Ge extends qe{get needed(){return this.enabled||this.deps.size>0}constructor(t,e,i,n){if(super(),ce(this,"enabled",!1),ce(this,"skip",new Set),ce(this,"pick",new Set),ce(this,"deps",new Set),ce(this,"translateKeys",!1),ce(this,"translateValues",!1),ce(this,"reviveValues",!1),this.key=t,this.enabled=e,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=Fe.includes(t),this.canBeFiltered&&(this.dict=ze.get(t)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if("object"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:t,skip:e}=i;t&&t.length>0&&this.translateTagSet(t,this.pick),e&&e.length>0&&this.translateTagSet(e,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:ye(`Invalid options argument: ${i}`)}applyInheritables(t){let e,i;for(e of $e)i=t[e],void 0!==i&&(this[e]=i)}translateTagSet(t,e){if(this.dict){let i,n,{tagKeys:r,tagValues:s}=this.dict;for(i of t)"string"==typeof i?(n=s.indexOf(i),-1===n&&(n=r.indexOf(Number(i))),-1!==n&&e.add(Number(r[n]))):e.add(i)}else for(let i of t)e.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ii(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ii(this.pick,this.deps)}}var Je={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Qe=new Map;class Ze extends qe{static useCached(t){let e=Qe.get(t);return void 0!==e||(e=new this(t),Qe.set(t,e)),e}constructor(t){super(),!0===t?this.setupFromTrue():void 0===t?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):"object"==typeof t?this.setupFromObject(t):ye(`Invalid options argument ${t}`),void 0===this.firstChunkSize&&(this.firstChunkSize=fe?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Re)this[t]=Je[t];for(t of Ke)this[t]=Je[t];for(t of Ye)this[t]=Je[t];for(t of Xe)this[t]=new Ge(t,Je[t],void 0,this)}setupFromTrue(){let t;for(t of Re)this[t]=Je[t];for(t of Ke)this[t]=Je[t];for(t of Ye)this[t]=!0;for(t of Xe)this[t]=new Ge(t,!0,void 0,this)}setupFromArray(t){let e;for(e of Re)this[e]=Je[e];for(e of Ke)this[e]=Je[e];for(e of Ye)this[e]=Je[e];for(e of Xe)this[e]=new Ge(e,!1,void 0,this);this.setupGlobalFilters(t,void 0,Fe)}setupFromObject(t){let e;for(e of(Fe.ifd0=Fe.ifd0||Fe.image,Fe.ifd1=Fe.ifd1||Fe.thumbnail,Object.assign(this,t),Re))this[e]=ei(t[e],Je[e]);for(e of Ke)this[e]=ei(t[e],Je[e]);for(e of Ye)this[e]=ei(t[e],Je[e]);for(e of Ve)this[e]=new Ge(e,Je[e],t[e],this);for(e of Fe)this[e]=new Ge(e,Je[e],t[e],this.tiff);this.setupGlobalFilters(t.pick,t.skip,Fe,Xe),!0===t.tiff?this.batchEnableWithBool(Fe,!0):!1===t.tiff?this.batchEnableWithUserValue(Fe,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,Fe):"object"==typeof t.tiff&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,Fe)}batchEnableWithBool(t,e){for(let i of t)this[i].enabled=e}batchEnableWithUserValue(t,e){for(let i of t){let t=e[i];this[i].enabled=!1!==t&&void 0!==t}}setupGlobalFilters(t,e,i,n=i){if(t&&t.length){for(let t of n)this[t].enabled=!1;let e=ti(t,i);for(let[t,i]of e)ii(this[t].pick,i),this[t].enabled=!0}else if(e&&e.length){let t=ti(e,i);for(let[e,i]of t)ii(this[e].skip,i)}}filterNestedSegmentTags(){let{ifd0:t,exif:e,xmp:i,iptc:n,icc:r}=this;this.makerNote?e.deps.add(37500):e.skip.add(37500),this.userComment?e.deps.add(37510):e.skip.add(37510),i.enabled||t.skip.add(700),n.enabled||t.skip.add(33723),r.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:e,gps:i,interop:n}=this;n.needed&&(e.deps.add(40965),t.deps.add(40965)),e.needed&&t.deps.add(34665),i.needed&&t.deps.add(34853),this.tiff.enabled=Fe.some(t=>!0===this[t].enabled)||this.makerNote||this.userComment;for(let t of Fe)this[t].finalizeFilters()}get onlyTiff(){return!He.map(t=>this[t].enabled).some(t=>!0===t)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of Ve)this[t].enabled&&!Ce.has(t)&&Oe("segment parser",t)}}function ti(t,e){let i,n,r,s,a=[];for(r of e){for(s of(i=ze.get(r),n=[],i))(t.includes(s[0])||t.includes(s[1]))&&n.push(s[0]);n.length&&a.push([r,n])}return a}function ei(t,e){return void 0!==t?t:void 0!==e?e:void 0}function ii(t,e){for(let i of e)t.add(i)}ce(Ze,"default",Je);class ni{constructor(t){ce(this,"parsers",{}),ce(this,"output",{}),ce(this,"errors",[]),ce(this,"pushToErrors",t=>this.errors.push(t)),this.options=Ze.useCached(t)}async read(t){this.file=await function(t,e){return"string"==typeof t?Ae(t,e):fe&&!pe&&t instanceof HTMLImageElement?Ae(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new ke(t):fe&&t instanceof Blob?De(t,e,"blob",Pe):void ye("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,e=t.getUint16(0);for(let[i,n]of Se)if(n.canHandle(t,e))return this.fileParser=new n(this.options,this.file,this.parsers),t[i]=!0;this.file.close&&this.file.close(),ye("Unknown file format")}async parse(){let{output:t,errors:e}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),e.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&e.length>0&&(t.errors=e),_e(i=t)?void 0:i;var i}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let e=Object.values(this.parsers).map(async e=>{let i=await e.parse();e.assignToOutput(t,i)});this.options.silentErrors&&(e=e.map(t=>t.catch(this.pushToErrors))),await Promise.all(e)}async extractThumbnail(){this.setup();let{options:t,file:e}=this,i=Ce.get("tiff",t);var n;if(e.tiff?n={start:0,type:"tiff"}:e.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),void 0===n)return;let r=await this.fileParser.ensureSegmentChunk(n),s=this.parsers.tiff=new i(r,t,e),a=await s.extractThumbnail();return e.close&&e.close(),a}}async function ri(t,e){let i=new ni(e);return await i.read(t),i.parse()}var si=Object.freeze({__proto__:null,parse:ri,Exifr:ni,fileParsers:Se,segmentParsers:Ce,fileReaders:Me,tagKeys:ze,tagValues:Ie,tagRevivers:We,createDictionary:Ue,extendDictionary:je,fetchUrlAsArrayBuffer:Le,readBlobAsArrayBuffer:Pe,chunkedProps:Re,otherSegments:He,segments:Ve,tiffBlocks:Fe,segmentsAndBlocks:Xe,tiffExtractables:Ye,inheritables:$e,allFormatters:Ke,Options:Ze});class ai{static findPosition(t,e){let i=t.getUint16(e+2)+2,n="function"==typeof this.headerLength?this.headerLength(t,e,i):this.headerLength,r=e+n,s=i-n;return{offset:e,length:i,headerLength:n,start:r,size:s,end:r+s}}static parse(t,e={}){return new this(t,new Ze({[this.type]:e}),t).parse()}normalizeInput(t){return t instanceof ke?t:new ke(t)}constructor(t,e={},i){ce(this,"errors",[]),ce(this,"raw",new Map),ce(this,"handleError",t=>{if(!this.options.silentErrors)throw t;this.errors.push(t.message)}),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=e,this.localOptions=e[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,e){let i=We.get(e),n=Ie.get(e),r=ze.get(e),s=this.options[e],a=s.reviveValues&&!!i,o=s.translateValues&&!!n,h=s.translateKeys&&!!r,l={};for(let[e,s]of t)a&&i.has(e)?s=i.get(e)(s):o&&n.has(e)&&(s=this.translateValue(s,n.get(e))),h&&r.has(e)&&(e=r.get(e)||e),l[e]=s;return l}translateValue(t,e){return e[t]||e.DEFAULT||t}assignToOutput(t,e){this.assignObjectToOutput(t,this.constructor.type,e)}assignObjectToOutput(t,e,i){if(this.globalOptions.mergeOutput)return Object.assign(t,i);t[e]?Object.assign(t[e],i):t[e]=i}}function oi(t){return 192===t||194===t||196===t||219===t||221===t||218===t||254===t}function hi(t){return t>=224&&t<=239}function li(t,e,i){for(let[n,r]of Ce)if(r.canHandle(t,e,i))return n}ce(ai,"headerLength",4),ce(ai,"type",void 0),ce(ai,"multiSegment",!1),ce(ai,"canHandle",()=>!1);class ci extends class{constructor(t,e,i){ce(this,"errors",[]),ce(this,"ensureSegmentChunk",async t=>{let e=t.start,i=t.size||65536;if(this.file.chunked)if(this.file.available(e,i))t.chunk=this.file.subarray(e,i);else try{t.chunk=await this.file.readChunk(e,i)}catch(e){ye(`Couldn't read segment: ${JSON.stringify(t)}. ${e.message}`)}else this.file.byteLength>e+i?t.chunk=this.file.subarray(e,i):void 0===t.size?t.chunk=this.file.subarray(e):ye("Segment unreachable: "+JSON.stringify(t));return t.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=e,this.parsers=i}injectSegment(t,e){this.options[t].enabled&&this.createParser(t,e)}createParser(t,e){let i=new(Ce.get(t))(e,this.options,this.file);return this.parsers[t]=i}createParsers(t){for(let e of t){let{type:t,chunk:i}=e,n=this.options[t];if(n&&n.enabled){let e=this.parsers[t];e&&e.append||e||this.createParser(t,i)}}}async readSegments(t){let e=t.map(this.ensureSegmentChunk);await Promise.all(e)}}{constructor(...t){super(...t),ce(this,"appSegments",[]),ce(this,"jpegSegments",[]),ce(this,"unknownSegments",[])}static canHandle(t,e){return 65496===e}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){!0===t?(this.findAll=!0,this.wanted=new Set(Ce.keyList())):(t=void 0===t?Ce.keyList().filter(t=>this.options[t].enabled):t.filter(t=>this.options[t].enabled&&Ce.has(t)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,e){this.setupSegmentFinderArgs(e);let{file:i,findAll:n,wanted:r,remaining:s}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some(t=>{let e=Ce.get(t),i=this.options[t];return e.multiSegment&&i.multiSegment}),n&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,i.byteLength),!this.options.onlyTiff&&i.chunked){let e=!1;for(;s.size>0&&!e&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:n}=i,r=this.appSegments.some(t=>!this.file.available(t.offset||t.start,t.length||t.size));if(e=t>n&&!r?!await i.readNextChunk(t):!await i.readNextChunk(n),void 0===(t=this.findAppSegmentsInRange(t,i.byteLength)))return}}}findAppSegmentsInRange(t,e){e-=2;let i,n,r,s,a,o,{file:h,findAll:l,wanted:c,remaining:u,options:f}=this;for(;t<e;t++)if(255===h.getUint8(t))if(i=h.getUint8(t+1),hi(i)){if(n=h.getUint16(t+2),r=li(h,t,n),r&&c.has(r)&&(s=Ce.get(r),a=s.findPosition(h,t),o=f[r],a.type=r,this.appSegments.push(a),!l&&(s.multiSegment&&o.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||u.delete(r)):u.delete(r),0===u.size)))break;f.recordUnknownSegments&&(a=ai.findPosition(h,t),a.marker=i,this.unknownSegments.push(a)),t+=n+1}else if(oi(i)){if(n=h.getUint16(t+2),218===i&&!1!==f.stopAfterSos)return;f.recordJpegSegments&&this.jpegSegments.push({offset:t,length:n,marker:i}),t+=n+1}return t}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let t=function(t){let e,i,n,r=new Map;for(let s=0;s<t.length;s++)e=t[s],i=e.type,r.has(i)?n=r.get(i):r.set(i,n=[]),n.push(e);return Array.from(r)}(this.appSegments);this.mergedAppSegments=t.map(([t,e])=>{let i=Ce.get(t,this.options);return i.handleMultiSegments?{type:t,chunk:i.handleMultiSegments(e)}:e[0]})}getSegment(t){return this.appSegments.find(e=>e.type===t)}async getOrFindSegment(t){let e=this.getSegment(t);return void 0===e&&(await this.findAppSegments(0,[t]),e=this.getSegment(t)),e}}ce(ci,"type","jpeg"),Se.set("jpeg",ci);const ui=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class fi extends ai{parseHeader(){var t=this.chunk.getUint16();18761===t?this.le=!0:19789===t&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,e,i=new Map){let{pick:n,skip:r}=this.options[e];n=new Set(n);let s=n.size>0,a=0===r.size,o=this.chunk.getUint16(t);t+=2;for(let h=0;h<o;h++){let o=this.chunk.getUint16(t);if(s){if(n.has(o)&&(i.set(o,this.parseTag(t,o,e)),n.delete(o),0===n.size))break}else!a&&r.has(o)||i.set(o,this.parseTag(t,o,e));t+=12}return i}parseTag(t,e,i){let{chunk:n}=this,r=n.getUint16(t+2),s=n.getUint32(t+4),a=ui[r];if(a*s<=4?t+=8:t=n.getUint32(t+8),(r<1||r>13)&&ye(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${r}, offset ${t}`),t>n.byteLength&&ye(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${r}, offset ${t} is outside of chunk size ${n.byteLength}`),1===r)return n.getUint8Array(t,s);if(2===r)return""===(o=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(o=n.getString(t,s)).trim())?void 0:o;var o;if(7===r)return n.getUint8Array(t,s);if(1===s)return this.parseTagValue(r,t);{let e=new(function(t){switch(t){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(r))(s),i=a;for(let n=0;n<s;n++)e[n]=this.parseTagValue(r,t),t+=i;return e}}parseTagValue(t,e){let{chunk:i}=this;switch(t){case 1:return i.getUint8(e);case 3:return i.getUint16(e);case 4:case 13:return i.getUint32(e);case 5:return i.getUint32(e)/i.getUint32(e+4);case 6:return i.getInt8(e);case 8:return i.getInt16(e);case 9:return i.getInt32(e);case 10:return i.getInt32(e)/i.getInt32(e+4);case 11:return i.getFloat(e);case 12:return i.getDouble(e);default:ye(`Invalid tiff type ${t}`)}}}class pi extends fi{static canHandle(t,e){return 225===t.getUint8(e+1)&&1165519206===t.getUint32(e+4)&&0===t.getUint16(e+8)}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let e=this[t]();return void 0!==e.catch&&(e=e.catch(this.handleError)),e}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),e=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(e)}}parseBlock(t,e){let i=new Map;return this[e]=i,this.parseTags(t,e,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&ye("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&ye(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,be(this.options));let e=this.parseBlock(this.ifd0Offset,"ifd0");return 0!==e.size?(this.exifOffset=e.get(34665),this.interopOffset=e.get(40965),this.gpsOffset=e.get(34853),this.xmp=e.get(700),this.iptc=e.get(33723),this.icc=e.get(34675),this.options.sanitize&&(e.delete(34665),e.delete(40965),e.delete(34853),e.delete(700),e.delete(33723),e.delete(34675)),e):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,be(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,e){let i=t.get(e);i&&1===i.length&&t.set(e,i[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",di(...t.get(2),t.get(1))),t.set("longitude",di(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let t=this.ifd1.get(513),e=this.ifd1.get(514);return this.chunk.getUint8Array(t,e)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,e,i,n={};for(e of Fe)if(t=this[e],!_e(t))if(i=this.canTranslate?this.translateBlock(t,e):Object.fromEntries(t),this.options.mergeOutput){if("ifd1"===e)continue;Object.assign(n,i)}else n[e]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(t,e){if(this.globalOptions.mergeOutput)Object.assign(t,e);else for(let[i,n]of Object.entries(e))this.assignObjectToOutput(t,i,n)}}function di(t,e,i,n){var r=t+e/60+i/3600;return"S"!==n&&"W"!==n||(r*=-1),r}ce(pi,"type","tiff"),ce(pi,"headerLength",10),Ce.set("tiff",pi);Object.freeze({__proto__:null,default:si,Exifr:ni,fileParsers:Se,segmentParsers:Ce,fileReaders:Me,tagKeys:ze,tagValues:Ie,tagRevivers:We,createDictionary:Ue,extendDictionary:je,fetchUrlAsArrayBuffer:Le,readBlobAsArrayBuffer:Pe,chunkedProps:Re,otherSegments:He,segments:Ve,tiffBlocks:Fe,segmentsAndBlocks:Xe,tiffExtractables:Ye,inheritables:$e,allFormatters:Ke,Options:Ze,parse:ri});const gi={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},gi,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},gi,{tiff:!1,ifd1:!0,mergeOutput:!1});Object.assign({},gi,{firstChunkSize:4e4,ifd0:[274]});Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let mi=!0,vi=!0;if("object"==typeof navigator){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e,n=Number(t)+.1*Number(i);mi=n<13.4,vi=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);mi=vi=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);mi=vi=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);mi=vi=Number(e)<77}}class _i extends ke{constructor(...t){super(...t),ce(this,"ranges",new yi),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(t,e,i){if(0===t&&0===this.byteLength&&i){let t=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(t)}else{let i=t+e;if(i>this.byteLength){let{dataView:t}=this._extend(i);this._swapDataView(t)}}}_extend(t){let e;e=me?ge.allocUnsafe(t):new Uint8Array(t);let i=new DataView(e.buffer,e.byteOffset,e.byteLength);return e.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:e,dataView:i}}subarray(t,e,i=!1){return e=e||this._lengthToEnd(t),i&&this._tryExtend(t,e),this.ranges.add(t,e),super.subarray(t,e)}set(t,e,i=!1){i&&this._tryExtend(e,t.byteLength,t);let n=super.set(t,e);return this.ranges.add(e,n.byteLength),n}async ensureChunk(t,e){this.chunked&&(this.ranges.available(t,e)||await this.readChunk(t,e))}available(t,e){return this.ranges.available(t,e)}}class yi{constructor(){ce(this,"list",[])}get length(){return this.list.length}add(t,e,i=0){let n=t+e,r=this.list.filter(e=>bi(t,e.offset,n)||bi(t,e.end,n));if(r.length>0){t=Math.min(t,...r.map(t=>t.offset)),n=Math.max(n,...r.map(t=>t.end)),e=n-t;let i=r.shift();i.offset=t,i.length=e,i.end=n,this.list=this.list.filter(t=>!r.includes(t))}else this.list.push({offset:t,length:e,end:n})}available(t,e){let i=t+e;return this.list.some(e=>e.offset<=t&&i<=e.end)}}function bi(t,e,i){return t<=e&&e<=i}class wi extends _i{constructor(t,e){super(0),ce(this,"chunksRead",0),this.input=t,this.options=e}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let e=this.options.chunkSize,i=await this.readChunk(t,e);return!!i&&i.byteLength===e}async readChunk(t,e){if(this.chunksRead++,0!==(e=this.safeWrapAddress(t,e)))return this._readChunk(t,e)}safeWrapAddress(t,e){return void 0!==this.size&&t+e>this.size?Math.max(0,this.size-t):e}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Me.set("blob",class extends wi{async readWhole(){this.chunked=!1;let t=await Pe(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let i=e?t+e:void 0,n=this.input.slice(t,i),r=await Pe(n);return this.set(r,t,!0)}});Symbol.for("uppy test: disable unused locale key warning");function xi(t,e){return t?.key??e}function ki(t){const e={};for(let i=0;i<t.length;i++)if(null!=t[i]){e[xi(t[i],i.toString(36))]=t[i]}return e}function Oi(t,e){t=t||{},e=e||{};const i=i=>Object.hasOwn(e,i)?e[i]:t[i],n={};let r=[];for(const i in t)Object.hasOwn(e,i)?r.length&&(n[i]=r,r=[]):r.push(i);const s={};for(const t in e){if(Object.hasOwn(n,t))for(let e=0;e<n[t].length;e++){const r=n[t][e];s[n[t][e]]=i(r)}s[t]=i(t)}for(let t=0;t<r.length;t++)s[r[t]]=i(r[t]);return s}class Ti extends S{constructor(t,e){super(t,e),this.refs={},this.state={children:ki(L(L(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const t=this.state.children;for(const e in t)t[e]&&this.performAppear(e)}componentWillReceiveProps(t){const e=ki(L(t.children)||[]),i=this.state.children;let n;for(n in this.setState(t=>({children:Oi(t.children,e)})),e)if(Object.hasOwn(e,n)){const t=i&&Object.hasOwn(i,n);e[n]&&t&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):!e[n]||t||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n)}for(n in i)if(Object.hasOwn(i,n)){const t=e&&Object.hasOwn(e,n);!i[n]||t||this.currentlyTransitioningKeys[n]||this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);const{keysToLeave:e}=this;this.keysToLeave=[],e.forEach(this.performLeave)}_finishAbort(t){const e=this.keysToAbortLeave.indexOf(t);-1!==e&&this.keysToAbortLeave.splice(e,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;const e=this.refs[t];e?.componentWillAppear?e.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){const e=this.refs[t];e?.componentDidAppear&&e.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const i=ki(L(this.props.children)||[]);i&&Object.hasOwn(i,t)||this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;const e=this.refs[t];e?.componentWillEnter?e.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){const e=this.refs[t];e?.componentDidEnter&&e.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const i=ki(L(this.props.children)||[]);i&&Object.hasOwn(i,t)||this.performLeave(t)}performLeave(t){if(-1!==this.keysToAbortLeave.indexOf(t))return;this.currentlyTransitioningKeys[t]=!0;const e=this.refs[t];e?.componentWillLeave?e.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(-1!==this.keysToAbortLeave.indexOf(t))return;const e=this.refs[t];e?.componentDidLeave&&e.componentDidLeave(),delete this.currentlyTransitioningKeys[t];const i=ki(L(this.props.children)||[]);if(i&&Object.hasOwn(i,t))this.performEnter(t);else{const e=(n={},r=this.state.children,Object.assign(n,r));delete e[t],this.setState({children:e})}var n,r}render({childFactory:t,transitionLeave:e,transitionName:i,transitionAppear:n,transitionEnter:r,transitionLeaveTimeout:s,transitionEnterTimeout:a,transitionAppearTimeout:o,component:h,...l},{children:c}){const u=Object.entries(c).map(([e,i])=>{if(!i)return;const n=function(t,e){const i=t._ptgLinkedRefs||(t._ptgLinkedRefs={});return i[e]||(i[e]=i=>{t.refs[e]=i})}(this,e);return X(t(i),{ref:n,key:e})}).filter(Boolean);return k(h,l,u)}}Ti.defaultProps={component:"span",childFactory:t=>t};var Si={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};const{STATE_ERROR:Ci,STATE_WAITING:Mi,STATE_PREPROCESSING:Ei,STATE_UPLOADING:Ai,STATE_POSTPROCESSING:Di,STATE_COMPLETE:Bi}=Si;var Li,Pi={exports:{}};Pi.exports;var Ni=function(){if(Li)return Pi.exports;Li=1,Pi.exports=n,Pi.exports.isMobile=n,Pi.exports.default=n;const t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,i=/android|ipad|playbook|silk/i;function n(n){n||(n={});let r=n.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;let s=t.test(r)&&!e.test(r)||!!n.tablet&&i.test(r);return!s&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(s=!0),s}return Pi.exports}();Ni.isMobile({tablet:!0});var Ui,ji,zi,Ii,Wi,Ri={};function Hi(){return zi||(zi=1,function(t){var e=function(){if(ji)return Ui;function t(t,e){"boolean"==typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return ji=1,Ui=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},i),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},t.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,i=0,n=0;n<this._errors.length;n++){var r=this._errors[n],s=r.message,a=(t[s]||0)+1;t[s]=a,a>=i&&(e=r,i=a)}return e},Ui}();t.operation=function(i){var n=t.timeouts(i);return new e(n,{forever:i&&(i.forever||i.retries===1/0),unref:i&&i.unref,maxRetryTime:i&&i.maxRetryTime})},t.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in t)e[i]=t[i];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],r=0;r<e.retries;r++)n.push(this.createTimeout(r,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(r,e)),n.sort(function(t,e){return t-e}),n},t.createTimeout=function(t,e){var i=e.randomize?Math.random()+1:1,n=Math.round(i*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout)},t.wrap=function(e,i,n){if(i instanceof Array&&(n=i,i=null),!n)for(var r in n=[],e)"function"==typeof e[r]&&n.push(r);for(var s=0;s<n.length;s++){var a=n[s],o=e[a];e[a]=function(n){var r=t.operation(i),s=Array.prototype.slice.call(arguments,1),a=s.pop();s.push(function(t){r.retry(t)||(t&&(arguments[0]=r.mainError()),a.apply(this,arguments))}),r.attempt(function(){n.apply(e,s)})}.bind(e,o),e[a].options=i}}}(Ri)),Ri}Wi||(Wi=1,Ii=Hi());Object.prototype.toString,new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);Error;var Vi="5.1.1";Error;Error;Symbol.for("uppy test: getCompanionHeaders");var Fi="5.1.0";new TextEncoder;Symbol("pausing upload, not an actual error");Symbol.for("uppy test: getChunkState");Symbol.for("uppy test: getClient");
/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */
function Xi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Yi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(i),!0).forEach(function(e){Gi(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xi(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function $i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function Ki(t){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(t)}function qi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$i(n.key),n)}}function Gi(t,e,i){return(e=$i(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ji(t){return function(t){if(Array.isArray(t))return Qi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Qi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Zi="undefined"!=typeof window&&void 0!==window.document,tn=Zi?window:{},en=!(!Zi||!tn.document.documentElement)&&"ontouchstart"in tn.document.documentElement,nn=!!Zi&&"PointerEvent"in tn,rn="cropper",sn="all",an="crop",on="move",hn="zoom",ln="e",cn="w",un="s",fn="n",pn="ne",dn="nw",gn="se",mn="sw",vn="".concat(rn,"-crop"),_n="".concat(rn,"-disabled"),yn="".concat(rn,"-hidden"),bn="".concat(rn,"-hide"),wn="".concat(rn,"-invisible"),xn="".concat(rn,"-modal"),kn="".concat(rn,"-move"),On="".concat(rn,"Action"),Tn="".concat(rn,"Preview"),Sn="crop",Cn="move",Mn="none",En="crop",An="cropend",Dn="cropmove",Bn="cropstart",Ln="dblclick",Pn=nn?"pointerdown":en?"touchstart":"mousedown",Nn=nn?"pointermove":en?"touchmove":"mousemove",Un=nn?"pointerup pointercancel":en?"touchend touchcancel":"mouseup",jn="ready",zn="resize",In="wheel",Wn="zoom",Rn="image/jpeg",Hn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Vn=/^data:/,Fn=/^data:image\/jpeg;base64,/,Xn=/^img|canvas$/i,Yn={viewMode:0,dragMode:Sn,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},$n=Number.isNaN||tn.isNaN;function Kn(t){return"number"==typeof t&&!$n(t)}var qn=function(t){return t>0&&t<1/0};function Gn(t){return void 0===t}function Jn(t){return"object"===Ki(t)&&null!==t}var Qn=Object.prototype.hasOwnProperty;function Zn(t){if(!Jn(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&Qn.call(i,"isPrototypeOf")}catch(t){return!1}}function tr(t){return"function"==typeof t}var er=Array.prototype.slice;function ir(t){return Array.from?Array.from(t):er.call(t)}function nr(t,e){return t&&tr(e)&&(Array.isArray(t)||Kn(t.length)?ir(t).forEach(function(i,n){e.call(t,i,n,t)}):Jn(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var rr=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Jn(t)&&i.length>0&&i.forEach(function(e){Jn(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},sr=/\.\d*(?:0|9){12}\d*$/;function ar(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return sr.test(t)?Math.round(t*e)/e:t}var or=/^width|height|left|top|marginLeft|marginTop$/;function hr(t,e){var i=t.style;nr(e,function(t,e){or.test(e)&&Kn(t)&&(t="".concat(t,"px")),i[e]=t})}function lr(t,e){if(e)if(Kn(t.length))nr(t,function(t){lr(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function cr(t,e){e&&(Kn(t.length)?nr(t,function(t){cr(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function ur(t,e,i){e&&(Kn(t.length)?nr(t,function(t){ur(t,e,i)}):i?lr(t,e):cr(t,e))}var fr=/([a-z\d])([A-Z])/g;function pr(t){return t.replace(fr,"$1-$2").toLowerCase()}function dr(t,e){return Jn(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(pr(e)))}function gr(t,e,i){Jn(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(pr(e)),i)}var mr=/\s\s*/,vr=function(){var t=!1;if(Zi){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});tn.addEventListener("test",i,n),tn.removeEventListener("test",i,n)}return t}();function _r(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;e.trim().split(mr).forEach(function(e){if(!vr){var s=t.listeners;s&&s[e]&&s[e][i]&&(r=s[e][i],delete s[e][i],0===Object.keys(s[e]).length&&delete s[e],0===Object.keys(s).length&&delete t.listeners)}t.removeEventListener(e,r,n)})}function yr(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;e.trim().split(mr).forEach(function(e){if(n.once&&!vr){var s=t.listeners,a=void 0===s?{}:s;r=function(){delete a[e][i],t.removeEventListener(e,r,n);for(var s=arguments.length,o=new Array(s),h=0;h<s;h++)o[h]=arguments[h];i.apply(t,o)},a[e]||(a[e]={}),a[e][i]&&t.removeEventListener(e,a[e][i],n),a[e][i]=r,t.listeners=a}t.addEventListener(e,r,n)})}function br(t,e,i){var n;return tr(Event)&&tr(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function wr(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var xr=tn.location,kr=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Or(t){var e=t.match(kr);return null!==e&&(e[1]!==xr.protocol||e[2]!==xr.hostname||e[3]!==xr.port)}function Tr(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Sr(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,r=t.translateX,s=t.translateY,a=[];Kn(r)&&0!==r&&a.push("translateX(".concat(r,"px)")),Kn(s)&&0!==s&&a.push("translateY(".concat(s,"px)")),Kn(e)&&0!==e&&a.push("rotate(".concat(e,"deg)")),Kn(i)&&1!==i&&a.push("scaleX(".concat(i,")")),Kn(n)&&1!==n&&a.push("scaleY(".concat(n,")"));var o=a.length?a.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Cr(t,e){var i=t.pageX,n=t.pageY,r={endX:i,endY:n};return e?r:Yi({startX:i,startY:n},r)}function Mr(t){var e=t.aspectRatio,i=t.height,n=t.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",s=qn(n),a=qn(i);if(s&&a){var o=i*e;"contain"===r&&o>n||"cover"===r&&o<n?i=n/e:n=i*e}else s?i=n/e:a&&(n=i*e);return{width:n,height:i}}var Er=String.fromCharCode;var Ar=/^data:.*,/;function Dr(t){var e,i=new DataView(t);try{var n,r,s;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var a=i.byteLength,o=2;o+1<a;){if(255===i.getUint8(o)&&225===i.getUint8(o+1)){r=o;break}o+=1}if(r){var h=r+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var r=e;r<i;r+=1)n+=Er(t.getUint8(r));return n}(i,r+4,4)){var l=i.getUint16(h);if(((n=18761===l)||19789===l)&&42===i.getUint16(h+2,n)){var c=i.getUint32(h+4,n);c>=8&&(s=h+c)}}}if(s){var u,f,p=i.getUint16(s,n);for(f=0;f<p;f+=1)if(u=s+12*f+2,274===i.getUint16(u,n)){u+=8,e=i.getUint16(u,n),i.setUint16(u,1,n);break}}}catch(t){e=1}return e}var Br={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,r=Number(e.minContainerWidth),s=Number(e.minContainerHeight);lr(n,yn),cr(t,yn);var a={width:Math.max(i.offsetWidth,r>=0?r:200),height:Math.max(i.offsetHeight,s>=0?s:100)};this.containerData=a,hr(n,{width:a.width,height:a.height}),lr(t,yn),cr(n,yn)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,r=n?e.naturalHeight:e.naturalWidth,s=n?e.naturalWidth:e.naturalHeight,a=r/s,o=t.width,h=t.height;t.height*a>t.width?3===i?o=t.height*a:h=t.width/a:3===i?h=t.width/a:o=t.height*a;var l={aspectRatio:a,naturalWidth:r,naturalHeight:s,width:o,height:h};this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=rr({},l)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,r=this.canvasData,s=this.cropBoxData,a=i.viewMode,o=r.aspectRatio,h=this.cropped&&s;if(t){var l=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;a>1?(l=Math.max(l,n.width),c=Math.max(c,n.height),3===a&&(c*o>l?l=c*o:c=l/o)):a>0&&(l?l=Math.max(l,h?s.width:0):c?c=Math.max(c,h?s.height:0):h&&(l=s.width,(c=s.height)*o>l?l=c*o:c=l/o));var u=Mr({aspectRatio:o,width:l,height:c});l=u.width,c=u.height,r.minWidth=l,r.minHeight=c,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(a>(h?0:1)){var f=n.width-r.width,p=n.height-r.height;r.minLeft=Math.min(0,f),r.minTop=Math.min(0,p),r.maxLeft=Math.max(0,f),r.maxTop=Math.max(0,p),h&&this.limited&&(r.minLeft=Math.min(s.left,s.left+(s.width-r.width)),r.minTop=Math.min(s.top,s.top+(s.height-r.height)),r.maxLeft=s.left,r.maxTop=s.top,2===a&&(r.width>=n.width&&(r.minLeft=Math.min(0,f),r.maxLeft=Math.max(0,f)),r.height>=n.height&&(r.minTop=Math.min(0,p),r.maxTop=Math.max(0,p))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=n.width,r.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var r=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var r=n%90*Math.PI/180,s=Math.sin(r),a=Math.cos(r),o=e*a+i*s,h=e*s+i*a;return n>90?{width:h,height:o}:{width:o,height:h}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),s=r.width,a=r.height,o=i.width*(s/i.naturalWidth),h=i.height*(a/i.naturalHeight);i.left-=(o-i.width)/2,i.top-=(h-i.height)/2,i.width=o,i.height=h,i.aspectRatio=s/a,i.naturalWidth=s,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,hr(this.canvas,rr({width:i.width,height:i.height},Sr({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),r=i.naturalHeight*(e.height/e.naturalHeight);rr(i,{width:n,height:r,left:(e.width-n)/2,top:(e.height-r)/2}),hr(this.image,rr({width:i.width,height:i.height},Sr(rr({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};i&&(e.height*i>e.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*n),r.height=Math.max(r.minHeight,r.height*n),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=rr({},r)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,r=this.canvasData,s=this.cropBoxData,a=this.limited,o=i.aspectRatio;if(t){var h=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,c=a?Math.min(n.width,r.width,r.width+r.left,n.width-r.left):n.width,u=a?Math.min(n.height,r.height,r.height+r.top,n.height-r.top):n.height;h=Math.min(h,n.width),l=Math.min(l,n.height),o&&(h&&l?l*o>h?l=h/o:h=l*o:h?l=h/o:l&&(h=l*o),u*o>c?u=c/o:c=u*o),s.minWidth=Math.min(h,c),s.minHeight=Math.min(l,u),s.maxWidth=c,s.maxHeight=u}e&&(a?(s.minLeft=Math.max(0,r.left),s.minTop=Math.max(0,r.top),s.maxLeft=Math.min(n.width,r.left+r.width)-s.width,s.maxTop=Math.min(n.height,r.top+r.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=n.width-s.width,s.maxTop=n.height-s.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&gr(this.face,On,i.width>=e.width&&i.height>=e.height?on:sn),hr(this.cropBox,rr({width:i.width,height:i.height},Sr({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),br(this.element,En,this.getData())}},Lr={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",s=document.createElement("img");if(e&&(s.crossOrigin=e),s.src=n,s.alt=r,this.viewBox.appendChild(s),this.viewBoxImage=s,i){var a=i;"string"==typeof i?a=t.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,nr(a,function(t){var i=document.createElement("img");gr(t,Tn,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=r,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)})}},resetPreview:function(){nr(this.previews,function(t){var e=dr(t,Tn);hr(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(Jn(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(pr(e)))}(t,Tn)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,r=i.height,s=t.width,a=t.height,o=i.left-e.left-t.left,h=i.top-e.top-t.top;this.cropped&&!this.disabled&&(hr(this.viewBoxImage,rr({width:s,height:a},Sr(rr({translateX:-o,translateY:-h},t)))),nr(this.previews,function(e){var i=dr(e,Tn),l=i.width,c=i.height,u=l,f=c,p=1;n&&(f=r*(p=l/n)),r&&f>c&&(u=n*(p=c/r),f=c),hr(e,{width:u,height:f}),hr(e.getElementsByTagName("img")[0],rr({width:s*p,height:a*p},Sr(rr({translateX:-o*p,translateY:-h*p},t))))}))}},Pr={bind:function(){var t=this.element,e=this.options,i=this.cropper;tr(e.cropstart)&&yr(t,Bn,e.cropstart),tr(e.cropmove)&&yr(t,Dn,e.cropmove),tr(e.cropend)&&yr(t,An,e.cropend),tr(e.crop)&&yr(t,En,e.crop),tr(e.zoom)&&yr(t,Wn,e.zoom),yr(i,Pn,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&yr(i,In,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&yr(i,Ln,this.onDblclick=this.dblclick.bind(this)),yr(t.ownerDocument,Nn,this.onCropMove=this.cropMove.bind(this)),yr(t.ownerDocument,Un,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&yr(window,zn,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;tr(e.cropstart)&&_r(t,Bn,e.cropstart),tr(e.cropmove)&&_r(t,Dn,e.cropmove),tr(e.cropend)&&_r(t,An,e.cropend),tr(e.crop)&&_r(t,En,e.crop),tr(e.zoom)&&_r(t,Wn,e.zoom),_r(i,Pn,this.onCropStart),e.zoomable&&e.zoomOnWheel&&_r(i,In,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&_r(i,Ln,this.onDblclick),_r(t.ownerDocument,Nn,this.onCropMove),_r(t.ownerDocument,Un,this.onCropEnd),e.responsive&&_r(window,zn,this.onResize)}},Nr={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,r=this.containerData,s=n.offsetWidth/r.width,a=n.offsetHeight/r.height,o=Math.abs(s-1)>Math.abs(a-1)?s:a;if(1!==o)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(nr(t,function(e,i){t[i]=e*o})),this.setCropBoxData(nr(e,function(t,i){e[i]=t*o})))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===Mn||this.setDragMode((t=this.dragBox,e=vn,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?Cn:Sn))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(Kn(e)&&1!==e||Kn(i)&&0!==i||t.ctrlKey))){var n,r=this.options,s=this.pointers;t.changedTouches?nr(t.changedTouches,function(t){s[t.identifier]=Cr(t)}):s[t.pointerId||0]=Cr(t),n=Object.keys(s).length>1&&r.zoomable&&r.zoomOnTouch?hn:dr(t.target,On),Hn.test(n)&&!1!==br(this.element,Bn,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===an&&(this.cropping=!0,lr(this.dragBox,xn)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==br(this.element,Dn,{originalEvent:t,action:e})&&(t.changedTouches?nr(t.changedTouches,function(t){rr(i[t.identifier]||{},Cr(t,!0))}):rr(i[t.pointerId||0]||{},Cr(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?nr(t.changedTouches,function(t){delete i[t.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,ur(this.dragBox,xn,this.cropped&&this.options.modal)),br(this.element,An,{originalEvent:t,action:e}))}}},Ur={change:function(t){var e,i=this.options,n=this.canvasData,r=this.containerData,s=this.cropBoxData,a=this.pointers,o=this.action,h=i.aspectRatio,l=s.left,c=s.top,u=s.width,f=s.height,p=l+u,d=c+f,g=0,m=0,v=r.width,_=r.height,y=!0;!h&&t.shiftKey&&(h=u&&f?u/f:1),this.limited&&(g=s.minLeft,m=s.minTop,v=g+Math.min(r.width,n.width,n.left+n.width),_=m+Math.min(r.height,n.height,n.top+n.height));var b=a[Object.keys(a)[0]],w={x:b.endX-b.startX,y:b.endY-b.startY},x=function(t){switch(t){case ln:p+w.x>v&&(w.x=v-p);break;case cn:l+w.x<g&&(w.x=g-l);break;case fn:c+w.y<m&&(w.y=m-c);break;case un:d+w.y>_&&(w.y=_-d)}};switch(o){case sn:l+=w.x,c+=w.y;break;case ln:if(w.x>=0&&(p>=v||h&&(c<=m||d>=_))){y=!1;break}x(ln),(u+=w.x)<0&&(o=cn,l-=u=-u),h&&(f=u/h,c+=(s.height-f)/2);break;case fn:if(w.y<=0&&(c<=m||h&&(l<=g||p>=v))){y=!1;break}x(fn),f-=w.y,c+=w.y,f<0&&(o=un,c-=f=-f),h&&(u=f*h,l+=(s.width-u)/2);break;case cn:if(w.x<=0&&(l<=g||h&&(c<=m||d>=_))){y=!1;break}x(cn),u-=w.x,l+=w.x,u<0&&(o=ln,l-=u=-u),h&&(f=u/h,c+=(s.height-f)/2);break;case un:if(w.y>=0&&(d>=_||h&&(l<=g||p>=v))){y=!1;break}x(un),(f+=w.y)<0&&(o=fn,c-=f=-f),h&&(u=f*h,l+=(s.width-u)/2);break;case pn:if(h){if(w.y<=0&&(c<=m||p>=v)){y=!1;break}x(fn),f-=w.y,c+=w.y,u=f*h}else x(fn),x(ln),w.x>=0?p<v?u+=w.x:w.y<=0&&c<=m&&(y=!1):u+=w.x,w.y<=0?c>m&&(f-=w.y,c+=w.y):(f-=w.y,c+=w.y);u<0&&f<0?(o=mn,c-=f=-f,l-=u=-u):u<0?(o=dn,l-=u=-u):f<0&&(o=gn,c-=f=-f);break;case dn:if(h){if(w.y<=0&&(c<=m||l<=g)){y=!1;break}x(fn),f-=w.y,c+=w.y,u=f*h,l+=s.width-u}else x(fn),x(cn),w.x<=0?l>g?(u-=w.x,l+=w.x):w.y<=0&&c<=m&&(y=!1):(u-=w.x,l+=w.x),w.y<=0?c>m&&(f-=w.y,c+=w.y):(f-=w.y,c+=w.y);u<0&&f<0?(o=gn,c-=f=-f,l-=u=-u):u<0?(o=pn,l-=u=-u):f<0&&(o=mn,c-=f=-f);break;case mn:if(h){if(w.x<=0&&(l<=g||d>=_)){y=!1;break}x(cn),u-=w.x,l+=w.x,f=u/h}else x(un),x(cn),w.x<=0?l>g?(u-=w.x,l+=w.x):w.y>=0&&d>=_&&(y=!1):(u-=w.x,l+=w.x),w.y>=0?d<_&&(f+=w.y):f+=w.y;u<0&&f<0?(o=pn,c-=f=-f,l-=u=-u):u<0?(o=gn,l-=u=-u):f<0&&(o=dn,c-=f=-f);break;case gn:if(h){if(w.x>=0&&(p>=v||d>=_)){y=!1;break}x(ln),f=(u+=w.x)/h}else x(un),x(ln),w.x>=0?p<v?u+=w.x:w.y>=0&&d>=_&&(y=!1):u+=w.x,w.y>=0?d<_&&(f+=w.y):f+=w.y;u<0&&f<0?(o=dn,c-=f=-f,l-=u=-u):u<0?(o=mn,l-=u=-u):f<0&&(o=pn,c-=f=-f);break;case on:this.move(w.x,w.y),y=!1;break;case hn:this.zoom(function(t){var e=Yi({},t),i=0;return nr(t,function(t,n){delete e[n],nr(e,function(e){var n=Math.abs(t.startX-e.startX),r=Math.abs(t.startY-e.startY),s=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),o=Math.sqrt(n*n+r*r),h=(Math.sqrt(s*s+a*a)-o)/o;Math.abs(h)>Math.abs(i)&&(i=h)})}),i}(a),t),y=!1;break;case an:if(!w.x||!w.y){y=!1;break}e=wr(this.cropper),l=b.startX-e.left,c=b.startY-e.top,u=s.minWidth,f=s.minHeight,w.x>0?o=w.y>0?gn:pn:w.x<0&&(l-=u,o=w.y>0?mn:dn),w.y<0&&(c-=f),this.cropped||(cr(this.cropBox,yn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}y&&(s.width=u,s.height=f,s.left=l,s.top=c,this.action=o,this.renderCropBox()),nr(a,function(t){t.startX=t.endX,t.startY=t.endY})}},jr={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&lr(this.dragBox,xn),cr(this.cropBox,yn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=rr({},this.initialImageData),this.canvasData=rr({},this.initialCanvasData),this.cropBoxData=rr({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(rr(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),cr(this.dragBox,xn),lr(this.cropBox,yn)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,nr(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,cr(this.cropper,_n)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,lr(this.cropper,_n)),this},destroy:function(){var t=this.element;return t[rn]?(t[rn]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,r=i.top;return this.moveTo(Gn(t)?t:n+Number(t),Gn(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(Kn(t)&&(i.left=t,n=!0),Kn(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,r=this.canvasData,s=r.width,a=r.height,o=r.naturalWidth,h=r.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var l=o*t,c=h*t;if(!1===br(this.element,Wn,{ratio:t,oldRatio:s/o,originalEvent:i}))return this;if(i){var u=this.pointers,f=wr(this.cropper),p=u&&Object.keys(u).length?function(t){var e=0,i=0,n=0;return nr(t,function(t){var r=t.startX,s=t.startY;e+=r,i+=s,n+=1}),{pageX:e/=n,pageY:i/=n}}(u):{pageX:i.pageX,pageY:i.pageY};r.left-=(l-s)*((p.pageX-f.left-r.left)/s),r.top-=(c-a)*((p.pageY-f.top-r.top)/a)}else Zn(e)&&Kn(e.x)&&Kn(e.y)?(r.left-=(l-s)*((e.x-r.left)/s),r.top-=(c-a)*((e.y-r.top)/a)):(r.left-=(l-s)/2,r.top-=(c-a)/2);r.width=l,r.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return Kn(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,Kn(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(Kn(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(Kn(t)&&(i.scaleX=t,n=!0),Kn(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,r=this.canvasData,s=this.cropBoxData;if(this.ready&&this.cropped){t={x:s.left-r.left,y:s.top-r.top,width:s.width,height:s.height};var a=n.width/n.naturalWidth;if(nr(t,function(e,i){t[i]=e/a}),e){var o=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=o-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,r={};if(this.ready&&!this.disabled&&Zn(t)){var s=!1;e.rotatable&&Kn(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,s=!0),e.scalable&&(Kn(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,s=!0),Kn(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;Kn(t.x)&&(r.left=t.x*a+n.left),Kn(t.y)&&(r.top=t.y*a+n.top),Kn(t.width)&&(r.width=t.width*a),Kn(t.height)&&(r.height=t.height*a),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?rr({},this.containerData):{}},getImageData:function(){return this.sized?rr({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&nr(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&Zn(t)&&(Kn(t.left)&&(e.left=t.left),Kn(t.top)&&(e.top=t.top),Kn(t.width)?(e.width=t.width,e.height=t.width/i):Kn(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Zn(t)&&(Kn(t.left)&&(n.left=t.left),Kn(t.top)&&(n.top=t.top),Kn(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),Kn(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),r&&(e?n.height=n.width/r:i&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var r=e.aspectRatio,s=e.naturalWidth,a=e.naturalHeight,o=e.rotate,h=void 0===o?0:o,l=e.scaleX,c=void 0===l?1:l,u=e.scaleY,f=void 0===u?1:u,p=i.aspectRatio,d=i.naturalWidth,g=i.naturalHeight,m=n.fillColor,v=void 0===m?"transparent":m,_=n.imageSmoothingEnabled,y=void 0===_||_,b=n.imageSmoothingQuality,w=void 0===b?"low":b,x=n.maxWidth,k=void 0===x?1/0:x,O=n.maxHeight,T=void 0===O?1/0:O,S=n.minWidth,C=void 0===S?0:S,M=n.minHeight,E=void 0===M?0:M,A=document.createElement("canvas"),D=A.getContext("2d"),B=Mr({aspectRatio:p,width:k,height:T}),L=Mr({aspectRatio:p,width:C,height:E},"cover"),P=Math.min(B.width,Math.max(L.width,d)),N=Math.min(B.height,Math.max(L.height,g)),U=Mr({aspectRatio:r,width:k,height:T}),j=Mr({aspectRatio:r,width:C,height:E},"cover"),z=Math.min(U.width,Math.max(j.width,s)),I=Math.min(U.height,Math.max(j.height,a)),W=[-z/2,-I/2,z,I];return A.width=ar(P),A.height=ar(N),D.fillStyle=v,D.fillRect(0,0,P,N),D.save(),D.translate(P/2,N/2),D.rotate(h*Math.PI/180),D.scale(c,f),D.imageSmoothingEnabled=y,D.imageSmoothingQuality=w,D.drawImage.apply(D,[t].concat(Ji(W.map(function(t){return Math.floor(ar(t))})))),D.restore(),A}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(t.rounded),r=n.x,s=n.y,a=n.width,o=n.height,h=i.width/Math.floor(e.naturalWidth);1!==h&&(r*=h,s*=h,a*=h,o*=h);var l=a/o,c=Mr({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=Mr({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),f=Mr({aspectRatio:l,width:t.width||(1!==h?i.width:a),height:t.height||(1!==h?i.height:o)}),p=f.width,d=f.height;p=Math.min(c.width,Math.max(u.width,p)),d=Math.min(c.height,Math.max(u.height,d));var g=document.createElement("canvas"),m=g.getContext("2d");g.width=ar(p),g.height=ar(d),m.fillStyle=t.fillColor||"transparent",m.fillRect(0,0,p,d);var v=t.imageSmoothingEnabled,_=void 0===v||v,y=t.imageSmoothingQuality;m.imageSmoothingEnabled=_,y&&(m.imageSmoothingQuality=y);var b,w,x,k,O,T,S=i.width,C=i.height,M=r,E=s;M<=-a||M>S?(M=0,b=0,x=0,O=0):M<=0?(x=-M,M=0,O=b=Math.min(S,a+M)):M<=S&&(x=0,O=b=Math.min(a,S-M)),b<=0||E<=-o||E>C?(E=0,w=0,k=0,T=0):E<=0?(k=-E,E=0,T=w=Math.min(C,o+E)):E<=C&&(k=0,T=w=Math.min(o,C-E));var A=[M,E,b,w];if(O>0&&T>0){var D=p/a;A.push(x*D,k*D,O*D,T*D)}return m.drawImage.apply(m,[i].concat(Ji(A.map(function(t){return Math.floor(ar(t))})))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||Gn(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var r=t===Sn,s=e.movable&&t===Cn;t=r||s?t:Mn,e.dragMode=t,gr(i,On,t),ur(i,vn,r),ur(i,kn,s),e.cropBoxMovable||(gr(n,On,t),ur(n,vn,r),ur(n,kn,s))}return this}},zr=tn.Cropper,Ir=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!Xn.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=rr({},Yn,Zn(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return e=t,i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[rn]){if(e[rn]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(Vn.test(t))Fn.test(t)?this.read((r=t.replace(Ar,""),s=atob(r),a=new ArrayBuffer(s.length),nr(o=new Uint8Array(a),function(t,e){o[e]=s.charCodeAt(e)}),a)):this.clone();else{var r,s,a,o,h=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=l,h.onerror=l,h.ontimeout=l,h.onprogress=function(){h.getResponseHeader("content-type")!==Rn&&h.abort()},h.onload=function(){e.read(h.response)},h.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&Or(t)&&i.crossOrigin&&(t=Tr(t)),h.open("GET",t,!0),h.responseType="arraybuffer",h.withCredentials="use-credentials"===i.crossOrigin,h.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=Dr(t),r=0,s=1,a=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(Er.apply(null,ir(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,Rn);var o=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);r=o.rotate,s=o.scaleX,a=o.scaleY}e.rotatable&&(i.rotate=r),e.scalable&&(i.scaleX=s,i.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&Or(e)&&(i||(i="anonymous"),n=Tr(e)),this.crossOrigin=i,this.crossOriginUrl=n;var r=document.createElement("img");i&&(r.crossOrigin=i),r.src=n||e,r.alt=t.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),lr(r,bn),t.parentNode.insertBefore(r,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=tn.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(tn.navigator.userAgent),n=function(e,i){rr(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=rr({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var r=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){n(r.width,r.height),i||s.removeChild(r)},r.src=e.src,i||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(r))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var s=r.querySelector(".".concat(rn,"-container")),a=s.querySelector(".".concat(rn,"-canvas")),o=s.querySelector(".".concat(rn,"-drag-box")),h=s.querySelector(".".concat(rn,"-crop-box")),l=h.querySelector(".".concat(rn,"-face"));this.container=n,this.cropper=s,this.canvas=a,this.dragBox=o,this.cropBox=h,this.viewBox=s.querySelector(".".concat(rn,"-view-box")),this.face=l,a.appendChild(i),lr(t,yn),n.insertBefore(s,t.nextSibling),cr(i,bn),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,lr(h,yn),e.guides||lr(h.getElementsByClassName("".concat(rn,"-dashed")),yn),e.center||lr(h.getElementsByClassName("".concat(rn,"-center")),yn),e.background&&lr(s,"".concat(rn,"-bg")),e.highlight||lr(l,wn),e.cropBoxMovable&&(lr(l,kn),gr(l,On,sn)),e.cropBoxResizable||(lr(h.getElementsByClassName("".concat(rn,"-line")),yn),lr(h.getElementsByClassName("".concat(rn,"-point")),yn)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),tr(e.ready)&&yr(t,jn,e.ready,{once:!0}),br(t,jn)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),cr(this.element,yn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],n=[{key:"noConflict",value:function(){return window.Cropper=zr,t}},{key:"setDefaults",value:function(t){rr(Yn,Zn(t)&&t)}}],i&&qi(e.prototype,i),n&&qi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n}();rr(Ir.prototype,Br,Lr,Pr,Nr,Ur,jr);
